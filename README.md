# Automatic Repair Tool
This is a mutation-based automatic repair tool that attempts to fix Java programs by applying mutation operators to specific places in the source code. Depending on the selected repair strategy and the information provided to the tool, different places in the source code will be mutated.

To obtain a list of candidate patch files for a buggy program:

```sh
java -jar auto_repairer.jar <project_path> <src_patch> <output_path> -ml|-ms|-mr|-mc <report_path>
```

- **\<project_path\>:** main path for the Java project;
- **\<src_path\>:** path to the source code files of the Java project;
- **\<output_path\>:** directory where generated patch files are placed;
- **\<repair_strategy\>:** strategy to employ during the repair process (see below for more information);
- **\<report_path\>:** report containing fault-localization information to guide the repair. The tool can read reports generated by [Morpheus](https://github.com/FranciscoRibeiro/morpheus).

## Repair strategies
Each repair strategy defines a criteria that decides which places in the source code will be mutated.

Possible repair strategies are:
- **`-ml` (Morpheus line):** applies mutations throughout each reported line. As such, expressions not affected by the inferred mutation may be mutated simply for being in the same line;
- **`-ms` (Morpheus strict):** applies mutations in the source code delimited not only by the line numbers (as in `-ml`) but also delimited by the specified columns. Therefore, this strategy potentially restricts the number of generated patches;
- **`-mr` (Morpheus relative):** applies mutations throughout each reported **relative** line. A relative line is numbered according to the beginning of the corresponding callable. Useful for when reports detect mutations in file versions that are not identical to the ones we are trying to currently fix (code has moved inside the same file).
- **`-mc` (Morpheus callable):** applies mutations to the entire body of methods/constructors specified in the report. This strategy has the potential to generate the greatest number of patches.

## Building the tool
You can use Maven to build the _jar file_:
```sh
mvn package
```

The `target` directory will contain the generated _jar file_.

**Note:** The repair tool needs to calculate expression types in order to perform the according  mutations. These calculations need access to information about the classes used to express many of the types a project may use. If a project uses third-party dependencies, these files may not be present in the project's directory. Failing to calculate the types of certain expressions may cause less patches to be produced.

As such, it is important to provide the complete classpath when executing the repair tool:

```sh
java -cp auto_repairer.jar:<remaining_classpath> MainKt ...
```

In that case, the main class to specify is `MainKt` followed by the arguments described in the beginning.
